# London Trip ‚Äî Project Context

## Trip Details
- **Arriving:** Late Feb 13 (Friday evening)
- **Full days:** Feb 14 (Sat) through Feb 19 (Thu) ‚Äî 6 full days
- **Departing:** Feb 20 (Fri) afternoon ‚Äî half day
- **Valentine's Day:** Feb 14 (Saturday) ‚Äî first full day
- **London Fashion Week:** Feb 19-23 ‚Äî overlaps last full day (mostly invite-only, but BFC City Wide Celebration has public events)
- **Hotel:** South Kensington area (Exhibitionist Hotel is on Google Maps list; Pravaas restaurant described as "near hotel")

## Key Files
- `London.md` ‚Äî **READ-ONLY**. Auto-generated by Apple Notes "Export as Markdown". Will be overwritten whenever user re-exports from Apple Notes. Treat as input only. Contains venue lists organized by section (Prep, Food/Pubs, Museums, Destinations, Stuff going on, Random/Low priority).
- `london_venues.py` ‚Äî Main script (~900 lines). Parses venues from London.md + Google Takeout CSV, fetches Google Maps Places API data, caches in SQLite, manages booking info, events, and reservations. Python 3.9 stdlib only (no pip dependencies).
- `london_venues.db` ‚Äî SQLite cache with 33 venues + 30+ events + reservations. All research data persisted here.
- `claude-research-plan.md` ‚Äî Research plan + **day-by-day schedule** (the deliverable). Confirmed reservations marked with `**CONFIRMED**` + confirmation numbers.
- `London 2026.csv` ‚Äî Google Takeout export of saved Google Maps places (input source #2). Non-standard format: has a title line "Stuff to visit in London" before the actual CSV header row.
- `reservations.csv` ‚Äî User-editable CSV for tracking reservations. Columns: venue, date, time, end_time, confirmation, party_size, notes. Import with `--import-reservations`.
- `schedule.html` ‚Äî Styled HTML version of the day-by-day schedule. Regenerate manually when schedule changes.
- `web_viewer.py` ‚Äî Quick web front end for browsing the SQLite database (venues, events, reservations). Run with `python3 web_viewer.py`, view at http://localhost:8080.

## API
- Google Maps Places API key stored in env var `GOOGLE_MAPS_API_KEY`
- Places API (New) endpoint: `POST https://places.googleapis.com/v1/places:searchText`
- Field mask: `places.id,places.displayName,places.formattedAddress,places.regularOpeningHours,places.googleMapsUri`
- Free tier: ~$0 for the ~27 requests we made (under $200/month free credit on GCP)
- API does NOT expose "popular times"/busyness data ‚Äî that's only visible in the Maps UI. Crowd patterns came from web research.

## Decisions Made
- RSC Ghost & Gore tour: only include if convenient (confirmed it's in Stratford-upon-Avon, ~2hrs away by train ‚Äî too far for this trip)
- Script language: Python 3.9 with SQLite (stdlib only, no pip dependencies). **Must use `from typing import Optional` for type hints** ‚Äî `str | None` syntax requires Python 3.10+ and the system has Python 3.9.7.
- Venue parsing: auto-parse from London.md (regex, 4 patterns) + Google Takeout CSV
- London.md is read-only; all output goes to separate files
- User priorities for research: (1) Events & what's on, (2) Booking logistics
- User wanted per-venue event calendars scraped and stored in a related DB table
- Dead Man's Hole is just a historical article link, not a real venue ‚Äî ignore the Texas result from Google Maps API

## Script Architecture

### `london_venues.py` ‚Äî Full Command Reference
```bash
export GOOGLE_MAPS_API_KEY="<key>"

# Core operations
python3 london_venues.py                  # parse + fetch new venues + print summary
python3 london_venues.py --parse-only     # just show parsed venues (no API calls)
python3 london_venues.py --refetch "X"    # re-fetch one venue from API
python3 london_venues.py --dump           # JSON dump of all venues + events

# Booking info
python3 london_venues.py --set-booking "Venue" --price "¬£10" --booking-required yes \
    --booking-url "https://..." --booking-notes "Notes" --member-required no

# Events
python3 london_venues.py --add-event --title "Event" --venue "Venue" \
    --date "2026-02-15" --time "8pm" --price "¬£25" --category "concert" --source "timeout"

# Reports
python3 london_venues.py --report        # full report: hours + booking + events per venue
python3 london_venues.py --events        # all events grouped by date

# Reservations
python3 london_venues.py --reservations                      # list all reservations
python3 london_venues.py --import-reservations reservations.csv  # import from CSV
python3 london_venues.py --add-reservation "Duck & Waffle" --date 2026-02-17 \
    --time 19:15 --end-time 21:00 --confirmation ABC123 --party-size 2
```

### Key Functions
- `init_db()` ‚Äî creates venues + events tables, runs `_migrate_booking_columns()`
- `_migrate_booking_columns()` ‚Äî uses `PRAGMA table_info` to add booking columns if missing (safe to re-run)
- `parse_markdown()` ‚Äî extracts venues from London.md by section headers (Food/Pubs, Museums, Destinations, Random/Low priority). Skips "Prep" and "Stuff going on" sections.
- `extract_venue_name()` ‚Äî handles 4 regex patterns for varying markdown formats:
  - Pattern 1: `Victoria & Albert Museum ([link](url))` ‚Äî plain text before parenthetical
  - Pattern 2: `[Lost Souls Pizza](url) (vampire-themed)` ‚Äî link text with optional subtitle
  - Pattern 3: Plain text with link somewhere in it
  - Pattern 4: Plain text only (no links)
  - Special case: `[Darwin's](url) (sky garden)` ‚Üí "Darwin's Sky Garden" (qualifier words mapped to title case)
- `parse_takeout_csvs()` ‚Äî scans CSV files for the header row starting with "Title," (Google Takeout "Saved" CSVs have a title line before headers). Maps emoji tags (üñºÔ∏è Art ‚Üí Museums, üìú Sites ‚Üí Destinations, üõçÔ∏è Shopping ‚Üí Shopping).
- `normalize_name()` ‚Äî lowercase, strip possessives/punctuation, strip trailing "tour"/"visit"/"tickets"/"experience", fix "cemetary"‚Üí"cemetery"
- `deduplicate_venues()` ‚Äî merges across sources (markdown + google_maps), prefers markdown entry, marks overlaps as source="both"
- `_find_venue_name()` ‚Äî apostrophe-agnostic lookup (handles straight ' vs curly ' U+2019 from markdown)
- `set_booking()` ‚Äî updates booking columns for existing venue (uses `_find_venue_name` for fuzzy match)
- `add_event()` ‚Äî inserts/upserts into events table with UNIQUE(title, venue_name, date)
- `print_report()` ‚Äî full report: hours + booking info + events per venue, grouped by section
- `print_events()` ‚Äî all events grouped by date
- `fuzzy_match_venue()` ‚Äî matches reservation venue names to DB venues (handles partial matches, normalization)
- `add_reservation()` ‚Äî adds a reservation, auto-matches to venue if found
- `import_reservations_csv()` ‚Äî bulk import from reservations.csv
- `print_reservations()` ‚Äî lists all reservations sorted by date

### DB Schema (v3)
```sql
CREATE TABLE IF NOT EXISTS venues (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL UNIQUE,
    source TEXT,              -- "markdown", "google_maps", "both"
    section TEXT,             -- "Food/Pubs", "Museums", "Destinations", etc.
    search_query TEXT,
    google_place_id TEXT,
    google_display_name TEXT,
    address TEXT,
    regular_hours_json TEXT,  -- raw JSON from API
    regular_hours_text TEXT,  -- human-readable "Monday: 10am-5pm | ..."
    google_maps_uri TEXT,
    raw_response TEXT,        -- full API response JSON
    fetched_at TEXT,
    -- booking columns (added via migration)
    ticket_price TEXT,
    booking_required TEXT,    -- "yes" / "no" / "recommended" / "free"
    booking_url TEXT,
    booking_notes TEXT,
    member_required TEXT      -- "no" / "soho house" / etc.
);

CREATE TABLE IF NOT EXISTS events (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT NOT NULL,
    venue_name TEXT,          -- matches venues.name (nullable for general events)
    date TEXT,                -- ISO "2026-02-14" or range "2026-02-14/2026-02-20"
    time TEXT,
    price TEXT,
    url TEXT,
    category TEXT,            -- exhibition, concert, festival, late_event, valentines, etc.
    notes TEXT,
    source TEXT,              -- "venue_website", "timeout", "songkick", "web_search"
    fetched_at TEXT,
    UNIQUE(title, venue_name, date)
);

CREATE TABLE IF NOT EXISTS reservations (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    venue_name TEXT NOT NULL,   -- as entered by user
    matched_venue TEXT,         -- matched to venues.name (nullable if no match)
    date TEXT NOT NULL,         -- ISO "2026-02-17"
    time TEXT,                  -- "19:15"
    end_time TEXT,              -- "21:00"
    confirmation TEXT,          -- confirmation code
    party_size INTEGER,
    notes TEXT,
    created_at TEXT,
    UNIQUE(venue_name, date, time)
);
```

### Known API Quirks
- **Camden Market** ‚Üí resolves to "Camden Town" (neighborhood) with no hours. Actual hours from web research: daily 10am-6pm (7pm in winter). Even "Camden Lock Market London NW1" returns no hours.
- **Dead Man's Hole** ‚Üí resolves to a location in Marble Falls, TX, USA (not London). This is a historical article/landmark, not a Google Maps venue. Ignore this result.
- **Royal Shakespeare Company** ‚Üí resolves to RSC London office, not Stratford-upon-Avon theatre. Confirms Ghost & Gore tour is in Stratford (~2hrs by train, skipping).

### Bugs Fixed During Development
- **Python 3.9 type hints:** Used `str | None` and `list[dict]` syntax which requires 3.10+. Fixed to `Optional[str]` and `list`.
- **CSV parsing (0 venues):** Google Takeout "Saved" CSV has a non-standard title line before headers. `csv.DictReader` treated title as headers. Fixed by scanning for the row starting with "Title,".
- **Dedup misses:** "Tower of London Tour" vs "Tower of London" and "Highgate Cemetary Tour" vs "Highgate Cemetery" weren't caught. Fixed `normalize_name()` with `re.sub(r"\s+(tours?|visit|tickets?|experience)$", "", n)` and `n.replace("cemetary", "cemetery")`.
- **Apostrophe mismatch in --set-booking:** DB stores curly apostrophes (U+2019 `'`) from markdown, but CLI passes straight apostrophes (U+0027 `'`). Added `_find_venue_name()` helper that tries both variants.

## All 33 Venues (current DB state)

### Destinations (9)
| Venue | Address | Hours | Booking | Price |
|-------|---------|-------|---------|-------|
| Abbey Road Studios | 3 Abbey Rd, NW8 9AY | Daily 9:30am-7pm (Sun 10-6) | No | Free (exterior only) |
| Camden Market | Camden Town | Daily 10am-6pm (7pm winter) | No | Free |
| Churchill War Rooms | King Charles St, SW1A 2AQ | Daily 9:30am-6pm (Fri-Sat from 9am) | Recommended | ¬£33 adult / ¬£25 after 3:30pm |
| Gods Own Junkyard | Walthamstow, E17 9HQ | Fri-Sat 11am-10pm, Sun 11am-6pm | No | Free |
| Highgate Cemetery | Swain's Ln, N6 6PJ | Daily 10am-4pm (winter) | Yes (timed entry) | ¬£10 combined / ¬£18 guided |
| Outernet London | Charing Cross Rd, WC2H | Daily 10am-11:30pm | No | Free (HERE venue ticketed) |
| Royal Shakespeare Company | London office only | N/A | N/A | In Stratford ‚Äî skipping |
| Sky Garden | Sky Garden Walk, EC3M 8AF | Mon-Thu 8am-12am, Fri-Sat 9am-1am | Yes (free tickets) | Free |
| Tower of London | EC3N 4AB | Tue-Sat 9am-4:30pm, Mon/Sun 10am-4:30pm | Yes (book 2-3 wks ahead) | ¬£34.80 online / ¬£39.80 gate |

### Food/Pubs (10)
| Venue | Address | Key Hours | Booking | Notes |
|-------|---------|-----------|---------|-------|
| Circolo Popolare | 40-41 Rathbone Pl, Fitzrovia, W1T 1HX | Daily 12-10:30pm (Sat-Sun from 11am) | Recommended | Big Mamma Italian. Bookings open 30 days ahead at 9am. Long queues for walk-ins. |
| Darwin's (Sky Garden) | Level 36, Sky Garden, EC3M | Mon-Thu 8:30am-10pm, Fri-Sat to 10:30pm | Recommended | Guests skip Sky Garden ticket queue. V-Day menu ¬£135pp. |
| Duck & Waffle | 110 Bishopsgate, EC2N 4AY | 24/7 | Yes (2 months ahead) | 40th floor views. Smart casual. Card only. |
| Ducksoup | 41 Dean St, Soho, W1D 4PY | Mon 5-10pm, Tue-Sat 12-3 + 5-10, Sun 12-4:30 | Recommended | Small intimate spot. Natural wines. |
| Ibai | 92 Bartholomew Cl, EC1A 7BN | Mon-Sat 12-10pm, **CLOSED SUN** | Recommended | Basque restaurant near Smithfield/Barbican. |
| Kettner's | 29 Romilly St, Soho, W1D 5AL | Daily from 7:30/8am to midnight+ | Yes (OpenTable) | Reopened to non-members 2023. French bistro. Champagne bar open to all. |
| Lost Souls Pizza | 245 Eversholt St, Camden, NW1 1BA | Wed-Thu 5-10:30pm, Fri 3-11:30, Sat 12-11:30, Sun 1-9 | Recommended (TheFork) | Vampire-themed. Black Wed: 2 pizzas ¬£20. Closed Mon-Tue. |
| Pravaas | 3 Glendower Pl, South Ken, SW7 3DU | Mon-Fri 12-3 + 5:30-10:30, Sat-Sun 12-10:30 | Yes (OpenTable) | **V-DAY DINNER ‚Äî BOOK NOW.** Phone: 0203 161 7641. Near hotel. |
| sketch | 9 Conduit St, Mayfair, W1S 2XG | Daily 8am-12am (Thu-Sat to 2am) | Recommended | Famous pink Gallery room. 3-star Lecture Room. Afternoon tea ~¬£80pp. |
| The Troubadour | 265-267 Old Brompton Rd, SW5 9JA | Mon 5pm-12am, Tue-Sun from 10am/12pm | No (check events) | Historic venue since 1954. Jazz Sundays. House Band Wednesdays. Free music upstairs. |

### Museums (5)
| Venue | Address | Hours | Booking | Price |
|-------|---------|-------|---------|-------|
| Natural History Museum | Cromwell Rd, South Ken, SW7 5BD | Daily 10am-5:50pm | Recommended (timed) | Free (exhibitions ¬£14-20) |
| Saatchi Gallery | King's Rd, Chelsea, SW3 4RY | Daily 10am-6pm | Recommended | From ¬£10 (The Long Now) |
| Tate Modern | Bankside, SE1 9TG | Mon-Thu 10-6, Fri-Sat 10-9, Sun 10-6 | Recommended for exhibitions | Free (exhibitions vary) |
| The National Gallery | Trafalgar Square, WC2N 5DN | Daily 10-6, **Fri to 9pm** | No (free fast-track available) | Free (exhibitions vary) |
| Victoria & Albert Museum | Cromwell Rd, South Ken, SW7 2RL | Mon-Thu/Sat-Sun 10-5:45, **Fri 10-10pm** | Free, no booking | Free |

### Google Maps List additions (6)
| Venue | Address | Hours | Booking | Price |
|-------|---------|-------|---------|-------|
| Borough Market | SE1 9AL | Tue-Fri 10-5, Sat 9-5, Sun 10-4, **CLOSED MON** | No | Free |
| SEA LIFE London Aquarium | County Hall, Westminster Bridge Rd, SE1 7PB | Daily 10am-4/6pm | Recommended (online cheaper) | From ¬£23 |
| The British Museum | Great Russell St, WC1B 3DG | Daily 10-5, **Fri to 8:30pm** | Recommended (timed entry) | Free (exhibitions ¬£16-23) |
| The Exhibitionist Hotel | 8-10 Queensberry Pl, South Ken, SW7 2EA | 24 hours | N/A | Hotel |
| The Graffiti Tunnel | Leake St, SE1 7NN (near Waterloo) | 24/7 | No | Free |
| The Viktor Wynd Museum | 11 Mare St, Hackney, E8 4RP | Tue-Fri 3-11pm, Sat 12-12am, Sun 12-10pm, **CLOSED MON** | Recommended (Eventbrite) | ¬£12 / ¬£8 concession / **¬£4 Thu walk-in** |

### Shopping (2)
| Venue | Address | Hours | Notes |
|-------|---------|-------|-------|
| Dr. Martens Oxford Circus | 184-188 Oxford St, W1D 1NP | Mon-Wed 10-8, Thu-Sat 10-9, Sun 11-6 | Flagship store |
| Sister Ray | 75 Berwick St, Soho, W1F 8TG | Mon-Sat 10-7, Sun 12-6 | Independent record shop |

### Skipped / Low Priority (2)
| Venue | Notes |
|-------|-------|
| Dead Man's Hole | Historical article, not a real venue. API returned Texas location. |
| RSC Ghost & Gore Tour | In Stratford-upon-Avon (~2hrs by train), too far for this trip. |

## Events During Trip (30+ stored in DB)

### Feb 13 (Fri) ‚Äî Arrival Night
- Saatchi Lates: The Long Now (6:30-9pm, from ¬£10)
- Lost Souls Pizza Friday the 13th Special (¬£13 pizzas, 2-for-¬£13 cocktails)

### Feb 14 (Sat) ‚Äî Valentine's Day
- Saatchi Family Day: The Long Now (free, ¬£5 suggested donation)
- NHM Valentine's Evening (dance classes, science stations, live music)
- Fenchurch Valentine's Tasting Menu at Sky Garden (¬£195pp + Veuve Clicquot)
- Darwin Brasserie Valentine's Menu (¬£135pp, 5 courses + Mo√´t Ros√©)
- Sleepless in Seattle Live at Royal Festival Hall (7:30pm, from ¬£36)
- DIY Valentine's Day Art Market at Copeland Park
- Summit: Ally Pally Rooftop Adventure launch (from ¬£22)
- Maximo Park at O2 Academy Brixton

### Feb 15 (Sun)
- The Troubadour Jazz Sunday (live jazz, romantic dinner setting)
- NHM February Family Festival begins (Feb 15-23, free)

### Feb 16 (Mon)
- Florence + The Machine at The O2 (with Paris Paloma)

### Feb 17 (Tue)
- Florence + The Machine Night 2 at The O2
- Of Monsters and Men at Roundhouse, Camden (with Arny Margret)

### Feb 19 (Thu)
- British Museum Samurai Online Talk (free, online)
- London Fashion Week Day 1 (public events via BFC City Wide Celebration)

### Feb 20 (Fri)
- V&A Friday Late (6:30-10pm, free) ‚Äî but departing this afternoon

### Ongoing Exhibitions During Trip
- **The Long Now** ‚Äî Saatchi Gallery (through Apr 26, from ¬£10)
- **Good Eye Projects 2026** ‚Äî Saatchi Gallery (through Mar 1, free)
- **Samurai** ‚Äî British Museum (through May 4, ¬£23)
- **Hawai'i: A Kingdom Crossing Oceans** ‚Äî British Museum (through May 25, ¬£16)
- **Theatre Picasso** ‚Äî Tate Modern (through Apr 12)
- **Nigerian Modernism** ‚Äî Tate Modern (through May 10)
- **Hyundai Commission: M√°ret √Ånne Sara** ‚Äî Tate Modern Turbine Hall (free, through Apr 12)
- **Wildlife Photographer of the Year** ‚Äî NHM (from ¬£15.50)
- **Our Story with David Attenborough** ‚Äî NHM (¬£20)
- **Space: Could Life Exist Beyond Earth?** ‚Äî NHM (¬£14, **CLOSES FEB 22 ‚Äî last week!**)
- **Visions of Nature (Mixed Reality)** ‚Äî NHM (¬£9.95)
- **Dark Fairy Tales Exhibition** ‚Äî Viktor Wynd Museum (included with admission)
- **Radical Harmony: Neo-Impressionists** ‚Äî National Gallery (**CLOSES FEB 8** ‚Äî before trip!)
- **Lucian Freud: Drawing into Painting** ‚Äî National Portrait Gallery
- **Kew Gardens Orchid Festival** ‚Äî Kew (through Mar 8)
- **Imagine Festival** ‚Äî Southbank Centre (Feb 11-21, many events free)
- **Design and Disability** ‚Äî V&A (**CLOSES FEB 15**)

## Day-by-Day Schedule (Summary)

Full schedule with times, backups, and booking links is in `claude-research-plan.md`.

| Day | Theme | Key Venues | Dinner |
|-----|-------|------------|--------|
| **Feb 13 Fri** | Arrival | Saatchi Lates or Lost Souls Pizza (if energy) | Near hotel |
| **Feb 14 Sat** | Valentine's Day: North London | Highgate Cemetery ‚Üí Abbey Road ‚Üí Lost Souls Pizza ‚Üí Camden Market | **La Terrazza 19:15 ‚úì** |
| **Feb 15 Sun** | East London | God's Own Junkyard ‚Üí Viktor Wynd Museum | Troubadour Jazz Sunday |
| **Feb 16 Mon** | Southbank + Soho | Tate Modern ‚Üí Graffiti Tunnel ‚Üí Outernet ‚Üí Sister Ray ‚Üí Dr. Martens | Ducksoup or Kettner's |
| **Feb 17 Tue** | The City (**Meesh's Birthday!**) | Barbie Green breakfast ‚Üí Barbican ‚Üí Tower of London (11:30) ‚Üí Sky Garden | **Duck & Waffle 19:15 ‚úì** |
| **Feb 18 Wed** | Covent Garden & Niece's Birthday | Royal Ballet School ‚Üí Covent Garden Market ‚Üí Royal Opera House tour (optional) ‚Üí National Portrait Gallery | Clos Maggiore / Rules / Spring |
| **Feb 19 Thu** | Museums + LFW | British Museum ‚Üí Borough Market (street food lunch) ‚Üí NHM ‚Üí Fashion Week | Final big dinner |
| **Feb 20 Fri** | Departure | V&A Museum (near hotel, morning only) | N/A (departing) |

## Advance Booking Checklist (by urgency)

| Priority | What | How | Price |
|----------|------|-----|-------|
| ~~**BOOKED**~~ | ~~La Terrazza V-Day dinner (Sat Feb 14, 19:15)~~ | ~~Conf: 24901~~ | ~~V-Day menu~~ |
| ~~**BOOKED**~~ | ~~Tower of London (Tue Feb 17, 11:30)~~ | ~~Conf: DVOTK7G16KVZY~~ | ~~¬£34.80~~ |
| **2 wks** | Highgate Cemetery (Feb 18) | highgatecemetery.org (timed entry) | ¬£10 combined |
| **2 wks** | Sky Garden free tickets | tickets.skygarden.london | Free |
| **1 wk** | British Museum timed entry (Feb 19) | britishmuseum.org | Free |
| **1 wk** | Darwin Brasserie (Feb 17 lunch) | skygarden.london or 0333 772 0020 | ~¬£20 mains |
| ~~**BOOKED**~~ | ~~Duck & Waffle (Tue Feb 17, 19:15)~~ | ~~Conf: CXSNF933JR88~~ | ~~Mid-high~~ |
| **1 wk** | Kettner's (Feb 16 or 19) | opentable.com | Mid-high |
| **1 wk** | Ducksoup (Feb 16) | Call 020 7287 4599 | Mid |
| **1 wk** | Lost Souls Pizza (Feb 18) | TheFork | ~¬£10-20pp |
| **Optional** | NHM exhibitions | nhm.ac.uk | ¬£14-20 each |
| **Optional** | Saatchi: The Long Now | saatchigallery.com | From ¬£10 |
| **Optional** | British Museum: Samurai | britishmuseum.org | ¬£23 |
| **Optional** | Viktor Wynd Museum | eventbrite.co.uk | ¬£12 (¬£4 Thu walk-in) |

## Geographic Clusters
- **South Kensington:** V&A, Natural History Museum, Pravaas, Troubadour, Exhibitionist Hotel. Saatchi (Chelsea) 15min walk.
- **Southbank / Bankside:** Tate Modern, Borough Market, Graffiti Tunnel (Leake St near Waterloo), SEA LIFE London Aquarium
- **Westminster:** Churchill War Rooms, Big Ben, Houses of Parliament
- **Trafalgar Square:** The National Gallery (free, between Soho and South Bank)
- **The City / Smithfield:** Tower of London, Sky Garden / Darwin Brasserie, Duck & Waffle, Ibai (Basque restaurant)
- **Soho / West End:** Outernet (Tottenham Court Rd), Kettner's (Romilly St), Ducksoup (Dean St), Sister Ray (Berwick St), Dr. Martens (Oxford Circus)
- **Fitzrovia / Mayfair:** Circolo Popolare, sketch (pink Gallery room, afternoon tea)
- **Bloomsbury:** British Museum
- **Camden:** Camden Market, Lost Souls Pizza (Eversholt St)
- **North London:** Highgate Cemetery (Archway tube), Abbey Road Studios (St John's Wood tube)
- **East London:** God's Own Junkyard (Walthamstow, Victoria line), Viktor Wynd Museum (Hackney, Overground)

## Budget Estimate (per person, excluding flights/hotel)
- **Attractions:** ¬£90-175 (Tower ¬£35, Highgate ¬£10-18, NHM exhibitions ¬£14-55, British Museum exhibitions ¬£16-39, Saatchi ¬£10, Viktor Wynd ¬£4-12)
- **Optional additions:** Churchill War Rooms ¬£25-33, SEA LIFE ¬£23-30
- **Restaurants (7 dinners):** ¬£150-350 (range from Lost Souls ¬£10pp to V-Day splurge)
- **Transport (Oyster/contactless):** ¬£50-70 (daily cap ~¬£8.10 zones 1-2)
- **Free venues:** V&A, Tate Modern, British Museum general, National Gallery, Borough Market, Camden Market, Outernet, Sky Garden, Graffiti Tunnel, Abbey Road, God's Own Junkyard
- **Total estimate:** ~¬£340-660 per person for the week (if adding all optional venues)

## Reservations Workflow

1. User makes a reservation ‚Üí adds it to `reservations.csv`
2. User runs `python3 london_venues.py --import-reservations reservations.csv`
3. User asks Claude to update the schedule with **CONFIRMED** markers and confirmation numbers
4. Claude removes conflicting alternatives and updates booking checklist

### Current Reservations
| Venue | Date | Time | Confirmation | Status |
|-------|------|------|--------------|--------|
| La Terrazza | Sat Feb 14 | 19:15 | `24901` | ‚úì Confirmed in schedule |
| Tower of London | Tue Feb 17 | 11:30 | `DVOTK7G16KVZY` | ‚úì Confirmed in schedule |
| Duck & Waffle | Tue Feb 17 | 19:15-21:00 | `CXSNF933JR88` | ‚úì Confirmed in schedule |

### Reservations Still Needed (Urgent)
- Highgate Cemetery (Feb 18)

## Research Status
- [x] Museum hours and crowd patterns
- [x] Tower of London crowd tips (midweek mornings best)
- [x] Highgate Cemetery pricing and tour info
- [x] Camden Market hours (daily 10-6/7)
- [x] God's Own Junkyard hours (Fri-Sun only, Walthamstow)
- [x] Sky Garden hours and booking (free but book ahead)
- [x] Outernet London (free, open daily, near Tottenham Court Rd)
- [x] London Fashion Week (Feb 19-23, invite-only but public events via City Wide Celebration)
- [x] Booking logistics for all 33 venues
- [x] Restaurant reservation details
- [x] Per-venue event calendars crawled
- [x] Events/concerts during Feb 14-20 (30+ events stored)
- [x] Valentine's Day special events researched
- [x] Google Maps list venues added (8 new from CSV, then 6 more added later)
- [x] Final day-by-day schedule (in claude-research-plan.md)
- [x] "Must-See Sights Not on Itinerary" analysis added to research plan
- [x] Reservations system implemented (CSV import, DB table, schedule markers)
- [x] Duck & Waffle reservation confirmed and marked in schedule
- [x] Tower of London reservation confirmed (11:30am, moved from 9am)
- [x] Feb 17 schedule rearranged: Barbie Green breakfast ‚Üí Barbican walk ‚Üí Tower 11:30 ‚Üí Sky Garden ‚Üí Duck & Waffle
- [x] Darwin Brasserie lunch dropped from Feb 17
- [x] Borough Market moved from Feb 17 to Feb 19 (street food lunch between British Museum and NHM)
- [x] Florence + The Machine dropped (too expensive)
- [x] Feb 17 noted as Meesh's birthday
- [x] HTML schedule created (schedule.html)
- [x] Web viewer for SQLite database (web_viewer.py)
